Помимо того, что разработчик по всем правилам опишет модель и все ее поля, 
необходимо перенести структуру из класса в выбранную базу данных. Для этого используется механизм миграций, 
которые отвечают за перенос структуры класса в структуру таблицы в базе данных.

Миграции в Django — это механизм, который позволяет автоматически создавать и 
обновлять структуру базы данных на основе изменений в определении моделей (Models) приложения.

Это удобный способ управления базой данных, который позволяет изменять схему базы данных, 
не прибегая к ручному написанию SQL-запросов или обновлению структуры вручную. Представьте, что вы изменили модель, 
и теперь вам нужно перенести эти изменения в базу данных. Миграции сделают это автоматически.

Давайте рассмотрим процесс работы с миграциями на примере модели Student:

from django.db import models

class Student(models.Model):
    FIRST_YEAR = 'first'
    SECOND_YEAR = 'second'
    THIRD_YEAR = 'third'
    FOURTH_YEAR = 'fourth'

    YEAR_IN_SCHOOL_CHOICES = [
        (FIRST_YEAR, 'Первый курс'),
        (SECOND_YEAR, 'Второй курс'),
        (THIRD_YEAR, 'Третий курс'),
        (FOURTH_YEAR, 'Четвертый курс'),
    ]

    first_name = models.CharField(max_length=150, verbose_name='Имя')
    last_name = models.CharField(max_length=150, verbose_name='Фамилия')
    year = models.CharField(
        max_length=6,
        choices=YEAR_IN_SCHOOL_CHOICES,
        default=FIRST_YEAR,
        verbose_name='Курс'
    )

    def __str__(self):
        return f'{self.first_name} {self.last_name}'

    class Meta:
        verbose_name = 'студент'
        verbose_name_plural = 'студенты'
        ordering = ['last_name']

Создание миграций
После того как мы определили нашу модель, необходимо создать миграцию, которая зафиксирует эти изменения. 
Для этого используется команда:

python manage.py makemigrations

Эта команда анализирует изменения в моделях и создает файлы миграций. 
Файлы миграций содержат инструкции для базы данных о том, как создать или изменить таблицы для хранения данных.

Где хранятся миграции в проекте
Миграции хранятся в специальных файлах внутри каждой директории приложения в папке migrations. 
Когда вы создаете новое приложение в Django, автоматически создается папка migrations с файлом __init__.py.

Обратите внимание, что, если в приложении не будет папки migrations или в ней будет отсутствовать файл __init__.py, 
это приведет к ошибкам и невозможности создать или применить миграции. Django очень требователен к структуре файлов и 
папок в вашем проекте!

Пример структуры проекта
Допустим, у вас есть приложение students. Структура папки приложения будет выглядеть примерно так:

students/
├── __init__.py
├── admin.py
├── apps.py
├── migrations/
│   └── __init__.py
├── models.py
...
└── views.py
Формат файлов миграций
Каждый файл миграции имеет уникальное имя, которое включает префикс с номером миграции и краткое описание изменений.

Например:

0001_initial.py
0002_add_field_email.py

0001_initial.py — это первая миграция, создающая начальную структуру базы данных для приложения.
0002_add_field_email.py — это вторая миграция, добавляющая новое поле email в модель.
Названия файлов миграций формируются автоматически и включают порядковый номер миграции и краткое описание изменений, 
которые помогают понять, что делает каждая миграция.

Содержание файлов миграций
Файлы миграций содержат Python-код, который описывает изменения в структуре базы данных. Например, 
файл миграции 0001_initial.py для модели Student может выглядеть так:

from django.db import migrations, models

class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Student',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('first_name', models.CharField(max_length=150, verbose_name='Имя')),
                ('last_name', models.CharField(max_length=150, verbose_name='Фамилия')),
                ('year', models.CharField(choices=[('first', 'Первый курс'), ('second', 'Второй курс'), ('third', 'Третий курс'), ('fourth', 'Четвертый курс')], default='first', max_length=6, verbose_name='Курс')),
            ],
        ),
    ]
Применение миграций
После создания миграций нужно применить их к базе данных. Это делается с помощью следующей команды:

python manage.py migrate

Команда выполняет SQL-запросы, которые соответствуют вашим миграциям, и обновляет структуру базы данных. 
Например, если мы применим миграции для нашей модели Student, в базе данных создастся таблица с соответствующими полями.

Откат миграций
Иногда возникает необходимость откатить изменения, сделанные миграциями. 
Это может потребоваться, если вы допустили ошибку или хотите вернуться к предыдущему состоянию базы данных. 
Для отката миграций существует несколько подходов, один из них — это откат миграции до определенного состояния, 
а другой — откат до состояния, когда ни одна миграция не была применена.

Откат миграции до определенной версии
Вы можете откатить миграцию до конкретной версии, указав имя приложения и номер миграции:

python manage.py migrate app_name migration_name

Например, если вы хотите откатить миграцию в приложении students до миграции с номером 0001, 
выполните следующую команду:

python manage.py migrate students 0001

Это отменит все миграции, выполненные после указанной.

Откат всех миграций (использование zero)
Если вам нужно откатить все миграции и вернуть базу данных в состояние, когда ни одна миграция не была применена, 
используйте специальное значение zero:

python manage.py migrate students zero

Эта команда откатит все миграции для приложения students, удалив все созданные таблицы и 
изменения структуры базы данных, связанные с этим приложением.

При работе с моделями и миграциями важно помнить:

После создания или изменения модели обязательно нужно создать миграции.
Если миграция была успешно создана, то нужно ее применить, чтобы сразу была возможность работать с обновленной структурой.
Миграции нельзя удалять, пока их изменения не отменены, иначе это приведет к конфликту приложения и базы данных.


Пример работы с миграциями
Предположим, вы создали модель Student, выполнили команду makemigrations, а затем migrate. 
В результате в базе данных будет создана таблица, соответствующая вашей модели.

Если затем вы добавите новое поле, например email, и снова выполните makemigrations и migrate, 
Django создаст новую миграцию для добавления столбца email в таблицу Student и применит это изменение к базе данных.

Миграции позволяют легко управлять изменениями в структуре базы данных и гарантируют, 
что эти изменения будут синхронизированы между всеми разработчиками в команде, а также между различными окружениями, 
например локальной разработкой и сервером, 
на котором развернута версия приложения для использования клиентами (продакшен).